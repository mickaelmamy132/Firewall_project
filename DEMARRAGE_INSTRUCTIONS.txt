â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           ğŸ”¥ FIREWALL DYNAMIQUE - GUIDE DÃ‰MARRAGE ğŸ”¥            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… CE QUI A Ã‰TÃ‰ FAIT:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ“ iptables installÃ© et fonctionnel
âœ“ Fichier /var/log/auth.log crÃ©Ã©
âœ“ DÃ©pendances Python installÃ©es (fastapi, uvicorn, requests, pydantic)
âœ“ Base de donnÃ©es SQLite configurÃ©e dans: data/dynfw.db
âœ“ Scripts de dÃ©marrage crÃ©Ã©s et testÃ©s


ğŸš€ DÃ‰MARRAGE RAPIDE (3 COMMANDES):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Aller dans le rÃ©pertoire du projet:
   $ cd /home/mamy/Desktop/Firewall_project

2. Lancer le firewall:
   $ bash start_firewall_simple.sh

3. VÃ©rifier que c'est actif (dans un autre terminal):
   $ curl http://127.0.0.1:8000/health


ğŸ“Š TESTS DE VÃ‰RIFICATION:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… Health Check:
   $ curl http://127.0.0.1:8000/health

âœ… Voir les IPs bloquÃ©es:
   $ curl -H "Authorization: Bearer MyToken" \
     http://127.0.0.1:8000/list

âœ… Voir la documentation API:
   Ouvrir: http://127.0.0.1:8000/docs

âœ… Voir les logs en direct:
   $ tail -f api/logs/api.log
   $ tail -f api/logs/learner.log

âœ… Voir les processus actifs:
   $ ps aux | grep firewall_api
   $ ps aux | grep log_analyzer


ğŸ“‹ STRUCTURE DU PROJET:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Firewall_project/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ firewall_api_improved.py         â† API FastAPI
â”‚   â”œâ”€â”€ log_analyzer_improved.py         â† Auto-learner SSH
â”‚   â”œâ”€â”€ ipTables_manager_improved.py     â† Gestion iptables
â”‚   â””â”€â”€ logs/                            â† Logs (auto-crÃ©Ã©)
â”‚       â”œâ”€â”€ api.log
â”‚       â””â”€â”€ learner.log
â”œâ”€â”€ data/
â”‚   â””â”€â”€ dynfw.db                         â† Base de donnÃ©es SQLite
â”œâ”€â”€ start_firewall_simple.sh             âœ… UTILISER CELUI-CI
â”œâ”€â”€ stop_firewall.sh                     â† Pour arrÃªter
â”œâ”€â”€ setup.sh                             â† Configuration avancÃ©e
â”œâ”€â”€ README.md                            â† Documentation complÃ¨te
â””â”€â”€ .venv/                               â† Environnement Python


ğŸ¯ FONCTIONNEMENT:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. API FastAPI Ã©coute sur le port 8000
   â””â”€ ReÃ§oit les requÃªtes de blocage/dÃ©blocage
   â””â”€ GÃ¨re la base de donnÃ©es
   â””â”€ Envoie les commandes iptables

2. Auto-learner surveille /var/log/auth.log
   â””â”€ Cherche les tentatives Ã©chouÃ©es SSH
   â””â”€ DÃ©clenche le blocage si seuil atteint
   â””â”€ Appelle l'API pour bloquer l'IP

3. iptables exÃ©cute les blocages
   â””â”€ CrÃ©e une chaÃ®ne "DYN_BLOCK"
   â””â”€ Ajoute/supprime les rÃ¨gles


âš™ï¸  CONFIGURATION (Optionnel):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Variables d'environnement (dans start_firewall_simple.sh):

DYNFW_API_URL=http://127.0.0.1:8000/block   â† URL de l'API
DYNFW_API_TOKEN=MyToken                   â† Token d'authentification
DYNFW_LOGFILE=/var/log/auth.log             â† Fichier log SSH
DYNFW_DB=./data/dynfw.db                    â† Base de donnÃ©es
DYNFW_THRESHOLD=5                           â† Nombre de tentatives avant blocage
DYNFW_WINDOW=300                            â† FenÃªtre en secondes (5 min)
DYNFW_BLOCK_TTL=7200                        â† DurÃ©e blocage en secondes (2h)


ğŸ›‘ ARRÃŠTER LE FIREWALL:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

$ bash stop_firewall.sh

Les rÃ¨gles iptables seront conservÃ©es jusqu'au prochain dÃ©marrage.


ğŸ” DÃ‰PANNAGE:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âŒ Port 8000 dÃ©jÃ  utilisÃ©?
   $ sudo lsof -i :8000
   $ sudo kill -9 <PID>

âŒ L'API ne dÃ©marre pas?
   $ .venv/bin/python api/firewall_api_improved.py

âŒ L'auto-learner ne dÃ©marre pas?
   $ .venv/bin/python api/log_analyzer_improved.py

âŒ Droits sudo?
   Les commandes iptables nÃ©cessitent sudo
   (Le script gÃ¨re automatiquement cela)

âŒ Besoin de dÃ©boguer?
   $ tail -f api/logs/api.log        # Logs API
   $ tail -f api/logs/learner.log    # Logs auto-learner


ğŸ“š DOCUMENTATION COMPLÃˆTE:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Voir les fichiers:
  - README.md              â† Vue d'ensemble
  - GUIDE_DEMARRAGE.md    â† Guide dÃ©taillÃ©
  - AMÃ‰LIORATIONS.md      â† DÃ©tails techniques


ğŸ‰ VOUS ÃŠTES PRÃŠT!
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Lancez simplement:
  $ cd /home/mamy/Desktop/Firewall_project
  $ bash start_firewall_simple.sh

C'est tout! âœ…


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
